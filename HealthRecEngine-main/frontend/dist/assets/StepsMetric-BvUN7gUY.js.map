{"version":3,"file":"StepsMetric-BvUN7gUY.js","sources":["../../app/features/metrics/StepsMetric.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Line, Bar } from \"react-chartjs-2\"\nimport Sidebar from \"../../components/Sidebar\"\nimport { useSidebar } from \"../../context/SidebarContext\"\nimport { healthAPI } from \"../../api/api\"\nimport { FaMoon, FaSun, FaArrowLeft, FaBrain, FaInfoCircle } from \"react-icons/fa\"\nimport { getInitialTheme, toggleTheme } from \"../../utils/theme-utils\"\nimport { useNavigate } from \"react-router-dom\"\n\nconst StepsMetric = () => {\n  const navigate = useNavigate()\n  const { isSidebarOpen } = useSidebar()\n  const [chartData, setChartData] = useState<any>(null)\n  const [timeRange, setTimeRange] = useState(\"week\")\n  const [isLoading, setIsLoading] = useState(true)\n  const [darkMode, setDarkMode] = useState(false)\n\n  // Initialize theme on component mount\n  useEffect(() => {\n    const initialDarkMode = getInitialTheme()\n    setDarkMode(initialDarkMode)\n  }, [])\n\n  const handleToggleTheme = () => {\n    const newDarkMode = toggleTheme(darkMode)\n    setDarkMode(newDarkMode)\n  }\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setIsLoading(true)\n      try {\n        const data = await healthAPI.getChartData(\"steps\", timeRange)\n        setChartData({\n          labels: data.labels,\n          datasets: [\n            {\n              label: \"Steps\",\n              data: data.values,\n              fill: false,\n              borderColor: \"#4F46E5\",\n              backgroundColor: \"rgba(79, 70, 229, 0.1)\",\n              tension: 0.1,\n            },\n          ],\n        })\n      } catch (error) {\n        console.error(\"Failed to fetch steps data:\", error)\n        setChartData(null)\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    fetchData()\n  }, [timeRange])\n\n  // Activity breakdown data\n  const activityData = {\n    labels: [\"Walking\", \"Running\", \"Hiking\", \"Other\"],\n    datasets: [\n      {\n        label: \"Activity Types\",\n        data: [0, 0, 0, 0], // Initialize with zeros\n        backgroundColor: [\n          \"rgba(79, 70, 229, 0.6)\",\n          \"rgba(34, 197, 94, 0.6)\",\n          \"rgba(239, 68, 68, 0.6)\",\n          \"rgba(249, 115, 22, 0.6)\",\n        ],\n        borderColor: [\"rgba(79, 70, 229, 1)\", \"rgba(34, 197, 94, 1)\", \"rgba(239, 68, 68, 1)\", \"rgba(249, 115, 22, 1)\"],\n        borderWidth: 1,\n      },\n    ],\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-gray-100 dark:bg-gray-900\">\n      <Sidebar />\n      <main className={`flex-1 transition-all duration-300 ${isSidebarOpen ? \"ml-64\" : \"ml-20\"} p-6 overflow-auto`}>\n        <div className=\"max-w-7xl mx-auto\">\n          {/* Page Header with Back Button */}\n          <div className=\"flex justify-between items-center mb-6\">\n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={() => navigate(\"/metrics\")}\n                className=\"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors\"\n              >\n                <FaArrowLeft className=\"mr-2\" />\n                Back to Metrics\n              </button>\n              <h1 className=\"text-3xl font-semibold text-gray-800 dark:text-white\">Steps</h1>\n            </div>\n            <button \n              onClick={handleToggleTheme} \n              className=\"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-colors\"\n              aria-label={darkMode ? \"Switch to light mode\" : \"Switch to dark mode\"}\n            >\n              {darkMode ? <FaSun className=\"h-5 w-5\" /> : <FaMoon className=\"h-5 w-5\" />}\n            </button>\n          </div>\n\n          {/* AI Warning */}\n          <div className=\"bg-yellow-50 dark:bg-yellow-900 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-6\">\n            <div className=\"flex items-start\">\n              <FaBrain className=\"text-yellow-500 mt-1 mr-3\" />\n              <div>\n                <h3 className=\"text-sm font-medium text-yellow-800 dark:text-yellow-200\">AI-Powered Insights</h3>\n                <p className=\"text-sm text-yellow-700 dark:text-yellow-300 mt-1\">\n                  The insights and recommendations provided are generated using artificial intelligence. While we strive for accuracy, these should not replace professional medical advice. Always consult with your healthcare provider for medical decisions.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Time Range Selector */}\n          <div className=\"flex justify-end mb-6\">\n            <div className=\"flex space-x-2\">\n              <button\n                onClick={() => setTimeRange(\"week\")}\n                className={`px-4 py-2 rounded-lg ${\n                  timeRange === \"week\"\n                    ? \"bg-blue-600 text-white\"\n                    : \"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white\"\n                }`}\n              >\n                Week\n              </button>\n              <button\n                onClick={() => setTimeRange(\"month\")}\n                className={`px-4 py-2 rounded-lg ${\n                  timeRange === \"month\"\n                    ? \"bg-blue-600 text-white\"\n                    : \"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white\"\n                }`}\n              >\n                Month\n              </button>\n              <button\n                onClick={() => setTimeRange(\"year\")}\n                className={`px-4 py-2 rounded-lg ${\n                  timeRange === \"year\"\n                    ? \"bg-blue-600 text-white\"\n                    : \"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white\"\n                }`}\n              >\n                Year\n              </button>\n            </div>\n          </div>\n\n          <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md\">\n            {isLoading ? (\n              <div className=\"flex justify-center items-center h-64\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n              </div>\n            ) : chartData ? (\n              <Line\n                data={chartData}\n                options={{\n                  responsive: true,\n                  plugins: {\n                    legend: {\n                      position: \"top\",\n                    },\n                    title: {\n                      display: true,\n                      text: \"Steps Over Time\",\n                    },\n                  },\n                  scales: {\n                    y: {\n                      beginAtZero: true,\n                      title: {\n                        display: true,\n                        text: \"Steps\",\n                      },\n                    },\n                  },\n                }}\n              />\n            ) : (\n              <p className=\"text-gray-600 dark:text-gray-400 text-center\">No data available</p>\n            )}\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6\">\n            <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md\">\n              <h2 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-4\">Activity Breakdown</h2>\n              <Bar\n                data={activityData}\n                options={{\n                  responsive: true,\n                  plugins: {\n                    legend: {\n                      display: false,\n                    },\n                  },\n                  scales: {\n                    y: {\n                      beginAtZero: true,\n                      max: 100,\n                      ticks: {\n                        callback: (value) => value + \"%\",\n                      },\n                    },\n                  },\n                }}\n              />\n            </div>\n            <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md\">\n              <h2 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-4\">Insights</h2>\n              <ul className=\"space-y-2 text-gray-600 dark:text-gray-400\">\n                {chartData ? (\n                  <>\n                    <li className=\"flex items-start\">\n                      <span className=\"inline-block w-2 h-2 rounded-full bg-green-500 mt-2 mr-2\"></span>\n                      Your average daily steps are {Math.round(chartData.datasets[0].data.reduce((a: number, b: number) => a + b, 0) / chartData.datasets[0].data.length)}.\n                    </li>\n                    <li className=\"flex items-start\">\n                      <span className=\"inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2\"></span>\n                      You've maintained a consistent activity level this week.\n                    </li>\n                    <li className=\"flex items-start\">\n                      <span className=\"inline-block w-2 h-2 rounded-full bg-yellow-500 mt-2 mr-2\"></span>\n                      Try to increase your daily steps to reach the recommended 10,000 steps.\n                    </li>\n                  </>\n                ) : (\n                  <li className=\"flex items-start\">\n                    <span className=\"inline-block w-2 h-2 rounded-full bg-gray-500 mt-2 mr-2\"></span>\n                    No step data available. Connect your Google Fit account to see insights.\n                  </li>\n                )}\n              </ul>\n            </div>\n          </div>\n\n          {/* Footer with AI Disclaimer */}\n          <footer className=\"mt-12 mb-8 text-center\">\n            <div className=\"border-t border-gray-200 dark:border-gray-700 pt-6\">\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                <FaInfoCircle className=\"inline-block mr-1\" />\n                AI-powered insights are provided for informational purposes only and should not replace professional medical advice.\n              </p>\n            </div>\n          </footer>\n        </div>\n      </main>\n    </div>\n  )\n}\n\nexport default StepsMetric\n\n"],"names":["StepsMetric","navigate","useNavigate","isSidebarOpen","useSidebar","chartData","setChartData","useState","timeRange","setTimeRange","isLoading","setIsLoading","darkMode","setDarkMode","useEffect","initialDarkMode","getInitialTheme","handleToggleTheme","newDarkMode","toggleTheme","data","healthAPI","error","activityData","jsxs","jsx","Sidebar","FaArrowLeft","FaSun","FaMoon","FaBrain","Line","Bar","value","Fragment","b","FaInfoCircle"],"mappings":"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"}